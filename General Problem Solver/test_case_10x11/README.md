# 标准测试数据：10节点11分支网络

## 📊 网络参数

| 参数 | 数值 |
|-----|------|
| 节点数 (N) | 10 |
| 分支数 (B) | 11 |
| 独立回路数 (M) | 2 |
| 系统总风量 | 120 m³/s |
| 入风节点 | 节点1 |
| 回风节点 | 节点10 |
| 创建日期 | 2025-12-18 |

---

## 🗺️ 网络拓扑结构

### 图形表示

```
          节点1 (入风)
            │
         分支1 (R=0.08, 入风立井)
            │
          节点2
          ╱    ╲
      分支2    分支3
    (R=0.18) (R=0.16)
       ╱        ╲
    节点3        节点4
      │            │
    分支4        分支5
   (R=0.14)    (R=0.12)
      │            │
    节点5 ←────────┘
      │
    分支6 (R=0.10, 中部主巷)
      │
    节点6
    ╱    ╲
 分支7    分支8
(R=0.20) (R=0.15)
  ╱        ╲
节点7    节点8
  │          │
分支9      分支10
(R=0.13)  (R=0.17)
  │          │
节点9 ←──────┘
  │
分支11 (R=0.09, 回风立井)
  │
节点10 (回风)
```

### 分层说明

**第1层（入风层）**
- 节点1 → 节点2（分支1：入风立井）

**第2层（下部并联层）**
- 节点2 → 节点3（分支2：左侧分支）
- 节点2 → 节点4（分支3：右侧分支）
- 节点3 → 节点5（分支4：左侧汇合巷道）
- 节点4 → 节点5（分支5：右侧汇合巷道）
- **回路1形成**：2 → 3 → 5 → 4 → 2

**第3层（中部主巷）**
- 节点5 → 节点6（分支6：中部主巷，连接上下层）

**第4层（上部并联层）**
- 节点6 → 节点7（分支7：左侧分支）
- 节点6 → 节点8（分支8：右侧分支）
- 节点7 → 节点9（分支9：左侧汇合巷道）
- 节点8 → 节点9（分支10：右侧汇合巷道）
- **回路2形成**：6 → 7 → 9 → 8 → 6

**第5层（回风层）**
- 节点9 → 节点10（分支11：回风立井）

---

## 🔄 独立回路分析

### 回路 1（下部并联回路）

**路径**：节点2 → 节点3 → 节点5 → 节点4 → 节点2

**分支序列**：
- 分支2 (2→3)：方向 +1
- 分支4 (3→5)：方向 +1
- 分支5 (4→5)：方向 -1（逆向）
- 分支3 (2→4)：方向 -1（逆向）

**风阻特性**：
- 总风阻（左支路）：R2 + R4 = 0.18 + 0.14 = 0.32 N·s²/m⁸
- 总风阻（右支路）：R3 + R5 = 0.16 + 0.12 = 0.28 N·s²/m⁸
- 右支路风阻较小，预期风量较大


### 回路 2（上部并联回路）

**路径**：节点6 → 节点7 → 节点9 → 节点8 → 节点6

**分支序列**：
- 分支7 (6→7)：方向 +1
- 分支9 (7→9)：方向 +1
- 分支10 (8→9)：方向 -1（逆向）
- 分支8 (6→8)：方向 -1（逆向）

**风阻特性**：
- 总风阻（左支路）：R7 + R9 = 0.20 + 0.13 = 0.33 N·s²/m⁸
- 总风阻（右支路）：R8 + R10 = 0.15 + 0.17 = 0.32 N·s²/m⁸
- 两支路风阻接近，预期风量相近

---

## 📈 风阻设计说明

### 分支类型与风阻值

| 分支类型 | 分支编号 | 风阻 (N·s²/m⁸) | 物理含义 |
|---------|---------|---------------|---------|
| 入风立井 | 1 | 0.08 | 断面大、长度中等、摩擦小 |
| 回风立井 | 11 | 0.09 | 断面大、长度中等 |
| 中部主巷 | 6 | 0.10 | 主要通风巷道，断面较大 |
| 右侧汇合巷道 | 5 | 0.12 | 断面中等 |
| 左侧上层汇合 | 9 | 0.13 | 断面中等 |
| 左侧下层汇合 | 4 | 0.14 | 断面中等偏小 |
| 右侧上层分支 | 8 | 0.15 | 断面中等偏小 |
| 右侧下层分支 | 3 | 0.16 | 断面小或长度长 |
| 右侧上层汇合 | 10 | 0.17 | 断面小或长度长 |
| 左侧下层分支 | 2 | 0.18 | 断面小、长度长、摩擦大 |
| 左侧上层分支 | 7 | 0.20 | 断面最小或长度最长 |

### 设计原则

1. **立井风阻最小**（0.08-0.09）：立井断面大、壁面光滑
2. **主巷风阻较小**（0.10）：承担主要通风任务
3. **并联支路风阻略有差异**：模拟实际矿井中巷道参数的自然差异
4. **整体风阻合理**：避免过大或过小导致数值问题

---

## 🎯 预期求解特性

### 收敛性分析

- **独立回路数**：M = 2（中等规模）
- **预期迭代次数**：20-50 次
- **收敛难度**：低（回路间耦合较弱）
- **数值稳定性**：好（风阻分布合理）

### 风量分布预测

**主通路风量**（分支1, 6, 11）：
- 应接近总风量 120 m³/s（串联巷道）

**回路1风量分配**：
- 左支路（分支2+4）：风阻大，风量小
- 右支路（分支3+5）：风阻小，风量大
- 预计分配比约 47:53

**回路2风量分配**：
- 左支路（分支7+9）：风阻稍大
- 右支路（分支8+10）：风阻稍小
- 预计分配比约 49:51（接近均分）

---

## 📂 文件清单

```
test_case_10x11/
├── README.md              本说明文档
├── branches.csv           分支数据（11条记录）
├── boundary.csv           边界条件（入口、出口、总风量）
└── solver_config.csv      求解器配置（Hardy Cross 参数）
```

---

## 🚀 使用方法

### 方法 1：在 MATLAB 中加载并求解

```matlab
% 添加 GPS 工具箱路径
addpath('General Problem Solver');

% 加载测试数据
[Branches, Boundary, Options] = gps.data.load_network_data('./test_case_10x11/');

% 调用通用求解器
[Q, Results] = gps.logic.ventilation_network_solver_generic(Branches, Boundary, Options);

% 显示结果
fprintf('\n========== 求解结果 ==========\n');
fprintf('收敛状态: %s\n', string(Results.converged));
fprintf('迭代次数: %d\n', Results.iterations);
fprintf('最大回路残差: %.6f Pa\n', Results.max_residual);

fprintf('\n风量分布：\n');
fprintf('  %-8s %-12s %-12s\n', '分支ID', '风量(m³/s)', '压降(Pa)');
fprintf('  %s\n', repmat('-', 1, 40));
for i = 1:length(Q)
    fprintf('  %-8d %-12.4f %-12.4f\n', ...
        Branches.id(i), Q(i), Results.pressure_diff_signed(i));
end
```

### 方法 2：使用 App Designer UI

1. 打开 `NetworkSolverApp.mlapp`
2. 点击"导入分支数据"按钮
3. 选择 `test_case_10x11/branches.csv`
4. 设置边界条件：
   - 总风量：120 m³/s
   - 入风节点：1
   - 回风节点：10
5. 点击"求解"按钮

---

## ✅ 验证清单

使用此测试数据可验证以下功能：

- [x] 多节点网络处理（N = 10）
- [x] 多回路识别（M = 2）
- [x] 并联网络风量分配
- [x] 回路间耦合处理
- [x] Hardy Cross 迭代收敛性
- [x] 节点流量守恒（基尔霍夫第一定律）
- [x] 回路压降平衡（基尔霍夫第二定律）
- [x] CSV 数据加载功能
- [x] 求解器配置参数生效

---

## 📊 理论校核

### 节点流量平衡校核

**节点1**：入风 120 m³/s
**节点2**：分支1流入 = 分支2流出 + 分支3流出
**节点3**：分支2流入 = 分支4流出
**节点4**：分支3流入 = 分支5流出
**节点5**：分支4流入 + 分支5流入 = 分支6流出
**节点6**：分支6流入 = 分支7流出 + 分支8流出
**节点7**：分支7流入 = 分支9流出
**节点8**：分支8流入 = 分支10流出
**节点9**：分支9流入 + 分支10流入 = 分支11流出
**节点10**：回风 120 m³/s

### 回路压降平衡校核

**回路1**：ΔP₂ + ΔP₄ - ΔP₅ - ΔP₃ = 0
**回路2**：ΔP₇ + ΔP₉ - ΔP₁₀ - ΔP₈ = 0

其中：ΔPᵢ = Rᵢ · Qᵢ · |Qᵢ|

---

## 🔧 故障排查

### 如果求解不收敛

1. 检查 CSV 文件编码是否为 UTF-8
2. 检查风阻系数是否全部为正数
3. 尝试减小松弛因子（RELAXATION = 0.8）
4. 增加最大迭代次数（MAX_ITER = 2000）

### 如果风量分布异常

1. 检查分支方向定义（from_node → to_node）
2. 检查入口/出口节点编号是否正确
3. 验证网络连通性（是否有孤立节点）

---

## 📝 版本历史

- **v1.0** (2025-12-18) - 初始版本
  - 10节点11分支网络
  - 2个独立回路
  - 矿井双层并联拓扑
  - 完整的数据文件和文档

---

## 👤 作者

MATLAB 通风工程专家助手

## 📄 许可

本测试数据集遵循项目主许可证
